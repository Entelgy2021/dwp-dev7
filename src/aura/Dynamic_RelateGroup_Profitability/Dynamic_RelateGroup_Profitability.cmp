<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction,force:hasSObjectName" access="global" controller="DynamicRelateProfability_cls">
    <aura:attribute name="showSpinner" type="Boolean" default="true" />
    <aura:attribute name="recordId" type="Id" default="{!v.recordId}" />
    <aura:attribute name="ProductIS" type="String" default="" />
    <aura:attribute name="coint1" type="String" default="" />
    <aura:attribute name="profiType" type="String" default="TOTAL"/> 
    <aura:attribute name="profiType1" type="String" default="DI"/> 
    <aura:attribute name="profiType2" type="String" default="Spread"/> 
    <aura:attribute name="profiType3" type="String" default="Tasa"/> 
    <aura:attribute name="profiType4" type="String" default=""/> 
    <aura:attribute name="isLoad" type="Boolean" access="global" default="false"/>
    <aura:attribute name="sizeColSpanMatrix" type="String"/>
    <aura:if isTrue="{!v.showSpinner}">
        <lightning:spinner />
    </aura:if>
    <aura:attribute name="options" type="List" default="[]"/>
    <aura:handler name="init" value="{!this}" action="{!c.init}" />
    <aura:handler event="force:refreshView" action="{!c.doInitRefreshView}" />
    
    
    
    <div class="slds-box" >
        <div class="slds-box slds-grid">
            <div class="slds-col slds-size_2-of-3">
                <lightning:combobox name="general" placeholder="--Ninguno--"  dropdownAlignment="right"
                                    variant="label-hidden" label="" options="{! v.options }" onchange="{!c.chgProduct}" />
            </div>
            <div class="slds-col slds-size_1-of-3">
                <lightning:buttonGroup>
                    <lightning:button aura:id="BtnTotal" variant="Neutral" label="Total" title="Total" onclick="{! c.BtnChangTotal}"/>
                    <lightning:button aura:id="BtnPEN" variant="Neutral" label="PEN" title="PEN" onclick="{!c.BtnChangPEN}"/>
                    <lightning:button aura:id="BtnUSD" variant="Neutral" label="USD" title="USD" onclick="{!c.BtnChangUSD}"/>
                </lightning:buttonGroup>
            </div>
        </div>
        <br></br>
        <div class="slds-box">
            <aura:if isTrue="{!v.isLoad}">
                <dwp_dv:DynamicRelatedGrupedTable_comp recordId="{!v.recordId}" 
                                                       sObjectName="{!v.sObjectName}"
                                                       Type="Matrix"
                                                       customLabelAPInameError="AccountNoData"
                                                       showTitle="false"
                                                       Object="Account_Profitability__c"
                                                       RelatedField="account_id__c"
                                                       Header="Value_Unificade__c"
                                                       FilterStatic="{!'is_date_type_1_within_last_6_months__c = true and product_desc__c!=\'\' and product_desc__c=\''+v.ProductIS+'\' and CurrencyIsoCode=\''+v.coint1+'\' and profitability_subcategory_type__c IN (\''+v.profiType+'\',\''+v.profiType1+'\',\''+v.profiType2+'\',\''+v.profiType3+'\',\''+v.profiType4+'\')'}"
                                                       Order="profitability_subcategory_type_order__c ASC" 
                                                       Group="profitability_subcategory_form__c"
                                                       HeaderGroup="period__c"
                                                       hidenSubHeadMatrix="true"
                                                       CollapsedDefault="true"
                                                       Format=" "
                                                       Summarize="SUM"
                                                       Symbol="true"
                                                       PositionCurrency="rigth"
                                                       Collapsed="true" 
                                                       />        
            </aura:if>
            <br></br>
            <div>
                <!--Aqui va la grafica  :D -->
            </div>
        </div>
    </div>
</aura:component>